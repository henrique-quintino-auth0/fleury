<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Auth0 Login Callback demo</title>
    <link
      rel="stylesheet"
      href="https://cdn.auth0.com/styleguide/core/2.0.5/core.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.auth0.com/styleguide/components/2.0.0/components.min.css"
    />
  </head>
  <body>
    <button id="login">Log in</button>
    <button id="authorize">Log in (ULP)</button>
    <button id="pwd-start">Passwordless Start</button>
    <button id="pwd-verify">Passwordless Verify</button>
    <button id="logout">Log out</button>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/latest/js.cookie.min.js"></script>
    <!-- <script src="/auth0.js"></script>
    <script src="/cordova-auth0-plugin.js"></script> -->
    
    <script src="https://cdn.auth0.com/js/auth0/9.16/auth0.min.js"></script>
    <script src="https://cdn.auth0.com/js/polyfills/1.0/object-assign.min.js"></script>

    <script type="application/javascript">
      const loginButton = document.getElementById('login');
      const authButton = document.getElementById('authorize');
      const pwdStartButton = document.getElementById('pwd-start');
      const pwdVerifyButton = document.getElementById('pwd-verify');
      const logoutButton = document.getElementById('logout');

      const options = {
        domain: 'play-hmq.us.auth0.com',
        clientID: 'eCY5bQdXl65UlusOhkpq1pCcwtXgCSDM',
        redirectUri: 'https://fleury.vercel.app/h/login.html',
        responseType: 'id_token'
      };

      var passwordlessEmail;

      authButton.addEventListener('click', () => {
        const webAuth = new auth0.WebAuth(options);

        webAuth.authorize({
          responseType: 'id_token'
        });
      });

      loginButton.addEventListener('click', () => {
        const webAuth = new auth0.WebAuth(options);

        webAuth.login(
          {
            responseType: 'id_token',
            username: 'hmello+2@gmail.com',
            password: 'Auth0Demo0',
            realm: 'Username-Password-Authentication',
            onRedirecting: function(done) {
              console.log('On redirecting..');
              done();
            }
          },
          function(err) {
            console.error(err);
          }
        );
      });

      pwdStartButton.addEventListener('click', () => {
        const webAuth = new auth0.WebAuth({
          ...options,
          responseType: 'id_token token'
        });

        const email = prompt('Enter your email address');

        if (email) {
          webAuth.passwordlessStart(
            {
              connection: 'email',
              send: 'code',
              email
            },
            (err, result) => {
              if (err) return console.error(err);
              console.log(result);
              passwordlessEmail = email;
              alert('Done! Check your email');
            }
          );
        }
      });

      pwdVerifyButton.addEventListener('click', () => {
        const webAuth = new auth0.WebAuth({
          ...options,
          responseType: 'id_token token'
        });

        const verificationCode = prompt('Enter the code');

        if (!passwordlessEmail) {
          passwordlessEmail = prompt(
            'Enter the email address to which the code was sent'
          );
        }

        if (verificationCode) {
          webAuth.passwordlessLogin(
            {
              connection: 'email',
              verificationCode,
              email: passwordlessEmail,
              onRedirecting: done => {
                console.log('Redirecting passwordless...');
                done();
              }
            },
            (err, res) => {
              if (err) console.error(err);
              console.log(res);
            }
          );
        }
      });

      logoutButton.addEventListener('click', () => {
        const webAuth = new auth0.WebAuth(options);
        webAuth.logout({ returnTo: 'https://fleury.vercel.app/login.html/h/login.html' });
      });

      window.onload = function() {
        const webAuth = new auth0.WebAuth(options);

        webAuth.parseHash((err, data) => {
          console.log(data);
          window.location.hash = '';
        });
      };


      var myHeaders = new Headers();
myHeaders.append("Authorization", "Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImpucWhRSlJHLTJrY19yNjkzLVhEVyJ9.eyJpc3MiOiJodHRwczovL2RlbW8taG1xLnVzLmF1dGgwLmNvbS8iLCJzdWIiOiI3WXF0N09OSFNYWmtkMFBDMW5mdDZmMlJhTDRiRVFSMkBjbGllbnRzIiwiYXVkIjoiaHR0cHM6Ly9kZW1vLWhtcS51cy5hdXRoMC5jb20vYXBpL3YyLyIsImlhdCI6MTYzMTU2NzkxOCwiZXhwIjoxNjMxNjU0MzE4LCJhenAiOiI3WXF0N09OSFNYWmtkMFBDMW5mdDZmMlJhTDRiRVFSMiIsInNjb3BlIjoicmVhZDpjbGllbnRfZ3JhbnRzIGNyZWF0ZTpjbGllbnRfZ3JhbnRzIGRlbGV0ZTpjbGllbnRfZ3JhbnRzIHVwZGF0ZTpjbGllbnRfZ3JhbnRzIHJlYWQ6dXNlcnMgdXBkYXRlOnVzZXJzIGRlbGV0ZTp1c2VycyBjcmVhdGU6dXNlcnMgcmVhZDp1c2Vyc19hcHBfbWV0YWRhdGEgdXBkYXRlOnVzZXJzX2FwcF9tZXRhZGF0YSBkZWxldGU6dXNlcnNfYXBwX21ldGFkYXRhIGNyZWF0ZTp1c2Vyc19hcHBfbWV0YWRhdGEgcmVhZDp1c2VyX2N1c3RvbV9ibG9ja3MgY3JlYXRlOnVzZXJfY3VzdG9tX2Jsb2NrcyBkZWxldGU6dXNlcl9jdXN0b21fYmxvY2tzIGNyZWF0ZTp1c2VyX3RpY2tldHMgcmVhZDpjbGllbnRzIHVwZGF0ZTpjbGllbnRzIGRlbGV0ZTpjbGllbnRzIGNyZWF0ZTpjbGllbnRzIHJlYWQ6Y2xpZW50X2tleXMgdXBkYXRlOmNsaWVudF9rZXlzIGRlbGV0ZTpjbGllbnRfa2V5cyBjcmVhdGU6Y2xpZW50X2tleXMgcmVhZDpjb25uZWN0aW9ucyB1cGRhdGU6Y29ubmVjdGlvbnMgZGVsZXRlOmNvbm5lY3Rpb25zIGNyZWF0ZTpjb25uZWN0aW9ucyByZWFkOnJlc291cmNlX3NlcnZlcnMgdXBkYXRlOnJlc291cmNlX3NlcnZlcnMgZGVsZXRlOnJlc291cmNlX3NlcnZlcnMgY3JlYXRlOnJlc291cmNlX3NlcnZlcnMgcmVhZDpkZXZpY2VfY3JlZGVudGlhbHMgdXBkYXRlOmRldmljZV9jcmVkZW50aWFscyBkZWxldGU6ZGV2aWNlX2NyZWRlbnRpYWxzIGNyZWF0ZTpkZXZpY2VfY3JlZGVudGlhbHMgcmVhZDpydWxlcyB1cGRhdGU6cnVsZXMgZGVsZXRlOnJ1bGVzIGNyZWF0ZTpydWxlcyByZWFkOnJ1bGVzX2NvbmZpZ3MgdXBkYXRlOnJ1bGVzX2NvbmZpZ3MgZGVsZXRlOnJ1bGVzX2NvbmZpZ3MgcmVhZDpob29rcyB1cGRhdGU6aG9va3MgZGVsZXRlOmhvb2tzIGNyZWF0ZTpob29rcyByZWFkOmFjdGlvbnMgdXBkYXRlOmFjdGlvbnMgZGVsZXRlOmFjdGlvbnMgY3JlYXRlOmFjdGlvbnMgcmVhZDplbWFpbF9wcm92aWRlciB1cGRhdGU6ZW1haWxfcHJvdmlkZXIgZGVsZXRlOmVtYWlsX3Byb3ZpZGVyIGNyZWF0ZTplbWFpbF9wcm92aWRlciBibGFja2xpc3Q6dG9rZW5zIHJlYWQ6c3RhdHMgcmVhZDppbnNpZ2h0cyByZWFkOnRlbmFudF9zZXR0aW5ncyB1cGRhdGU6dGVuYW50X3NldHRpbmdzIHJlYWQ6bG9ncyByZWFkOmxvZ3NfdXNlcnMgcmVhZDpzaGllbGRzIGNyZWF0ZTpzaGllbGRzIHVwZGF0ZTpzaGllbGRzIGRlbGV0ZTpzaGllbGRzIHJlYWQ6YW5vbWFseV9ibG9ja3MgZGVsZXRlOmFub21hbHlfYmxvY2tzIHVwZGF0ZTp0cmlnZ2VycyByZWFkOnRyaWdnZXJzIHJlYWQ6Z3JhbnRzIGRlbGV0ZTpncmFudHMgcmVhZDpndWFyZGlhbl9mYWN0b3JzIHVwZGF0ZTpndWFyZGlhbl9mYWN0b3JzIHJlYWQ6Z3VhcmRpYW5fZW5yb2xsbWVudHMgZGVsZXRlOmd1YXJkaWFuX2Vucm9sbG1lbnRzIGNyZWF0ZTpndWFyZGlhbl9lbnJvbGxtZW50X3RpY2tldHMgcmVhZDp1c2VyX2lkcF90b2tlbnMgY3JlYXRlOnBhc3N3b3Jkc19jaGVja2luZ19qb2IgZGVsZXRlOnBhc3N3b3Jkc19jaGVja2luZ19qb2IgcmVhZDpjdXN0b21fZG9tYWlucyBkZWxldGU6Y3VzdG9tX2RvbWFpbnMgY3JlYXRlOmN1c3RvbV9kb21haW5zIHVwZGF0ZTpjdXN0b21fZG9tYWlucyByZWFkOmVtYWlsX3RlbXBsYXRlcyBjcmVhdGU6ZW1haWxfdGVtcGxhdGVzIHVwZGF0ZTplbWFpbF90ZW1wbGF0ZXMgcmVhZDptZmFfcG9saWNpZXMgdXBkYXRlOm1mYV9wb2xpY2llcyByZWFkOnJvbGVzIGNyZWF0ZTpyb2xlcyBkZWxldGU6cm9sZXMgdXBkYXRlOnJvbGVzIHJlYWQ6cHJvbXB0cyB1cGRhdGU6cHJvbXB0cyByZWFkOmJyYW5kaW5nIHVwZGF0ZTpicmFuZGluZyBkZWxldGU6YnJhbmRpbmcgcmVhZDpsb2dfc3RyZWFtcyBjcmVhdGU6bG9nX3N0cmVhbXMgZGVsZXRlOmxvZ19zdHJlYW1zIHVwZGF0ZTpsb2dfc3RyZWFtcyBjcmVhdGU6c2lnbmluZ19rZXlzIHJlYWQ6c2lnbmluZ19rZXlzIHVwZGF0ZTpzaWduaW5nX2tleXMgcmVhZDpsaW1pdHMgdXBkYXRlOmxpbWl0cyBjcmVhdGU6cm9sZV9tZW1iZXJzIHJlYWQ6cm9sZV9tZW1iZXJzIGRlbGV0ZTpyb2xlX21lbWJlcnMgcmVhZDplbnRpdGxlbWVudHMgcmVhZDphdHRhY2tfcHJvdGVjdGlvbiB1cGRhdGU6YXR0YWNrX3Byb3RlY3Rpb24gcmVhZDpvcmdhbml6YXRpb25zIHVwZGF0ZTpvcmdhbml6YXRpb25zIGNyZWF0ZTpvcmdhbml6YXRpb25zIGRlbGV0ZTpvcmdhbml6YXRpb25zIGNyZWF0ZTpvcmdhbml6YXRpb25fbWVtYmVycyByZWFkOm9yZ2FuaXphdGlvbl9tZW1iZXJzIGRlbGV0ZTpvcmdhbml6YXRpb25fbWVtYmVycyBjcmVhdGU6b3JnYW5pemF0aW9uX2Nvbm5lY3Rpb25zIHJlYWQ6b3JnYW5pemF0aW9uX2Nvbm5lY3Rpb25zIHVwZGF0ZTpvcmdhbml6YXRpb25fY29ubmVjdGlvbnMgZGVsZXRlOm9yZ2FuaXphdGlvbl9jb25uZWN0aW9ucyBjcmVhdGU6b3JnYW5pemF0aW9uX21lbWJlcl9yb2xlcyByZWFkOm9yZ2FuaXphdGlvbl9tZW1iZXJfcm9sZXMgZGVsZXRlOm9yZ2FuaXphdGlvbl9tZW1iZXJfcm9sZXMgY3JlYXRlOm9yZ2FuaXphdGlvbl9pbnZpdGF0aW9ucyByZWFkOm9yZ2FuaXphdGlvbl9pbnZpdGF0aW9ucyBkZWxldGU6b3JnYW5pemF0aW9uX2ludml0YXRpb25zIiwiZ3R5IjoiY2xpZW50LWNyZWRlbnRpYWxzIn0.wJWoFPZoMg30pVGTOyEXw2NuOR_m4BwuH2ePYgG1bm_BnNeAw1F3tG2AaYVMFefW8fLipOUjSaG4s2OpZqkn8UbRCCaOQ5JkEskPaq3Dx37qeDEXfv7ijO8plW1jtGBGCBLmPhczOP1KRIhlcsuKAW1GSoMH3KbbtcFuWcRE6522Qqug-_D5OG-RPKME2IYD7sllcgHC2Ra0HgSaBgHO_yuQ38TJn76zrd8pvjsZsO3qhXMuN93KOV7PVYRNZNUQBRw9QnLF50l33nzAccpdQHUDzW7ELzf4hzvnl8slnTtpbZ_JgZO9IV9B0SAv80S4kXL5Vab9-NPn-YsY5CTOxw");
//myHeaders.append("Cookie", "did=s%3Av0%3A750c5c00-f55d-11eb-81a2-cd6a8138fe60.fF86XIQ3zmSs1uLiNmvlnBIuE3ZC5SXE9ilxiqxTdjg; did_compat=s%3Av0%3A750c5c00-f55d-11eb-81a2-cd6a8138fe60.fF86XIQ3zmSs1uLiNmvlnBIuE3ZC5SXE9ilxiqxTdjg");

var requestOptions = {
  method: 'GET',
  headers: myHeaders,
  redirect: 'follow'
};

fetch("https://demo-hmq.us.auth0.com/api/v2/users-by-email?email=hmello@gmail.com", requestOptions)
  .then(response => response.text())
  .then(result => console.log(result))
  .catch(error => console.log('error', error));
  
    </script>
  </body>
</html>
